import {
  prop,
  mergeLeft
} from 'ramda';

import {
  GET_APP_BY_SLUG_REQUEST,
  GET_APP_BY_SLUG_FAILURE,
  GET_APP_BY_SLUG_SUCCESS,
  APP_PAGE_OUT
} from 'actionTypes';

const initialState = {
  id: null,
  loading: true,
  error: null
};

export default (state = initialState, {
  type,
  payload
}) => {
  switch (type) {
    case GET_APP_BY_SLUG_REQUEST:
      return mergeLeft({
        loading: true,
        error: null,
      }, state)
    case GET_APP_BY_SLUG_FAILURE:
      return mergeLeft({
        id: null,
        loading: false,
        error: payload,
      }, state)
    case GET_APP_BY_SLUG_SUCCESS:
      return mergeLeft({
        id: prop('id', payload),
        loading: false,
        error: null,
      }, state)
    case APP_PAGE_OUT:
      return mergeLeft({
        id: null
      }, state)
    default:
      return state
  };
};